<div class="row">
    <div class="col-8">
        <h1>Add Mob</h1>

        TODO:<br />
        calculate AR/AC from inventory
        Add alignment
        Add affects
        Add room description ?
        add room emotes
        skills and spells? (handled by the server, mobs have prof of 100%)
        Save Mob (set inventory items to worn which are worn)



        <form novalidate [formGroup]="addMobForm" (ngSubmit)="addMob()">
            <input type="hidden" formControlName="id">

            <div class="row">
                <div class="col">
                    <mat-form-field class="form-control">
                        <input matInput placeholder="Mob name" value="" required formControlName="name">
                        <mat-error *ngIf="addMobForm.get('name').hasError('required')">
                            Mob name is required.
                        </mat-error>
                    </mat-form-field>
                </div>
                <div class="col">
                    <mat-form-field class="form-control">
                        <input type="number" max="99" min="1" matInput placeholder="Level" value="" required
                            formControlName="level">
                        <mat-error *ngIf="addMobForm.get('level').hasError('min') || addMobForm.get('level').hasError('max')">
                            Mob level must be between 1 and 99.
                        </mat-error>
                    </mat-form-field>
                </div>
            </div>

            <div class="row">
                <div class="col">
                    <mat-form-field>
                        <mat-select formControlName="gender" placeholder="Gender" required (selectionChange)="selectGender($event)">
                            <mat-option *ngFor="let gender of genders" [value]="gender.id">
                                {{ gender.name }}
                            </mat-option>
                        </mat-select>
                        <mat-error *ngIf="addMobForm.get('gender').hasError('required')">Genders required</mat-error>
                    </mat-form-field>
                </div>

                <div class="col">
                    <mat-form-field>
                        <mat-select formControlName="race" placeholder="race" required (selectionChange)="selectRace($event)">
                            <mat-option *ngFor="let race of races" [value]="race.id" [title]="race.description">
                                {{ race.name }}
                            </mat-option>
                        </mat-select>
                        <mat-error *ngIf="addMobForm.get('race').hasError('required')">race is required</mat-error>
                    </mat-form-field>
                </div>

                <div class="col">
                    <mat-form-field>
                        <mat-select formControlName="class" placeholder="class" required (selectionChange)="selectClass($event)">
                            <mat-option *ngFor="let class of classes" [value]="class.id" [title]="class.description">
                                {{ class.name }}
                            </mat-option>
                        </mat-select>
                        <mat-error *ngIf="addMobForm.get('class').hasError('required')">class required</mat-error>
                    </mat-form-field>
                </div>


                <div class="col">
                    <mat-form-field>
                        <mat-select formControlName="alignment" placeholder="alignment" required (selectionChange)="selectAlignment($event)">
                            <mat-option *ngFor="let alignment of alignments" [value]="alignment.id">
                                {{ alignment.name }}
                            </mat-option>
                        </mat-select>
                        <mat-error *ngIf="addMobForm.get('alignment').hasError('required')">alignment required</mat-error>
                    </mat-form-field>
                </div>
            </div>

            <div class="row" formGroupName="stats">
                <div class="col">
                    <mat-form-field class="form-control">
                        <input matInput type="number" max="99" min="1" placeholder="Hit points" value="" required
                            formControlName="hitPoints">
                        <mat-error *ngIf="addMobForm.get('stats').get('hitPoints').hasError('min') || addMobForm.get('stats').get('hitPoints').hasError('max')">
                            Hit points must be between 1 and 99.
                        </mat-error>
                    </mat-form-field>
                </div>
                <div class="col">
                    <mat-form-field class="form-control">
                        <input type="number" max="99" min="1" matInput placeholder="Mana points" value="" required
                            formControlName="manaPoints">
                        <mat-error *ngIf="addMobForm.get('stats').get('manaPoints').hasError('min') || addMobForm.get('stats').get('manaPoints').hasError('max')">
                            Mana Points must be between 1 and 99.
                        </mat-error>
                    </mat-form-field>
                </div>
                <div class="col">
                    <mat-form-field class="form-control">
                        <input type="number" max="99" min="1" matInput placeholder="Move points" value="" required
                            formControlName="movePoints">
                        <mat-error *ngIf="addMobForm.get('stats').get('movePoints').hasError('min') ||addMobForm.get('stats').get('movePoints').hasError('max')">
                            Move Points must be between 1 and 99.
                        </mat-error>
                    </mat-form-field>
                </div>
            </div>

            <div class="row" formGroupName="attributes">
                <div class="col-2">
                    <mat-form-field class="form-control">
                        <input matInput type="number" max="99" min="1" placeholder="Strength" value="" required
                            formControlName="strength">
                        <mat-error *ngIf="addMobForm.get('attributes').get('strength').hasError('min') || addMobForm.get('attributes').get('strength').hasError('max')">
                            strength must be between 1 and 99.
                        </mat-error>
                    </mat-form-field>
                </div>
                <div class="col-2">
                    <mat-form-field class="form-control">
                        <input type="number" max="99" min="1" matInput placeholder="Dexterity" value="" required
                            formControlName="dexterity">
                        <mat-error *ngIf="addMobForm.get('attributes').get('dexterity').hasError('min') || addMobForm.get('attributes').get('dexterity').hasError('max')">
                            Dexterity must be between 1 and 99.
                        </mat-error>
                    </mat-form-field>
                </div>
                <div class="col-2">
                    <mat-form-field class="form-control">
                        <input type="number" max="99" min="1" matInput placeholder="Constitution" value="" required
                            formControlName="constitution">
                        <mat-error *ngIf="addMobForm.get('attributes').get('constitution').hasError('min')||addMobForm.get('attributes').get('constitution').hasError('max')">
                            constitution must be between 1 and 99.
                        </mat-error>
                    </mat-form-field>
                </div>
                <div class="col-2">
                    <mat-form-field class="form-control">
                        <input type="number" max="99" min="1" matInput placeholder="Wisdom" value="" required
                            formControlName="wisdom">
                        <mat-error *ngIf="addMobForm.get('attributes').get('wisdom').hasError('min') ||addMobForm.get('attributes').get('wisdom').hasError('max')">
                            wisdom must be between 1 and 99.
                        </mat-error>
                    </mat-form-field>
                </div>
                <div class="col-2">
                    <mat-form-field class="form-control">
                        <input type="number" max="99" min="1" matInput placeholder="Intelligence" value="" required
                            formControlName="intelligence">
                        <mat-error *ngIf="addMobForm.get('attributes').get('intelligence').hasError('min') ||addMobForm.get('attributes').get('intelligence').hasError('max')">
                            intelligence must be between 1 and 99.
                        </mat-error>
                    </mat-form-field>
                </div>
                <div class="col-2">
                    <mat-form-field class="form-control">
                        <input type="number" max="99" min="1" matInput placeholder="Charisma" value="" required
                            formControlName="charisma">
                        <mat-error *ngIf="addMobForm.get('attributes').get('charisma').hasError('min') ||addMobForm.get('attributes').get('charisma').hasError('max')">
                            charisma must be between 1 and 99.
                        </mat-error>
                    </mat-form-field>
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <app-equipment></app-equipment>
                </div>
                <div class="col">
                    <app-inventory></app-inventory>
                </div>

            </div>
            <div class="row">
                <div class="col">
                    <mat-form-field class="form-control">
                        <textarea matInput placeholder="Description" value="" required formControlName="description"
                            cdkTextareaAutosize #autosize="cdkTextareaAutosize" cdkAutosizeMinRows="1"
                            cdkAutosizeMaxRows="10" (selectionChange)="triggerDescriptionResize()">

                      </textarea>
                        <mat-error *ngIf="addMobForm.get('description').hasError('required')">
                            Mob description is required.
                        </mat-error>
                    </mat-form-field>
                </div>
            </div>
            <button mat-raised-button color="primary" type="submit" [disabled]="addMobForm.invalid">Save Mob</button>
        </form>
    </div>
</div>